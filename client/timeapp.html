<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>{{projectName}}</title>
</head>

<body>
</body>


<template name="ApplicationLayout">

    {{> yield "header"}}

    {{> yield "main"}}

</template>


<!-- templates for header -->

<!-- route: / -->

<template name="logobar">
<span class="debug">template: template: {{currentTemplateName}}</span>

<div class="fixed">
	<div class="top-bar">
		<div class="top-bar-title">
			<span data-responsive-toggle="responsive-menu" data-hide-for="medium">
				<span class="menu-icon dark" data-toggle></span>
			</span>
			<strong>{{projectName}}</strong>
		</div>
		<div id="responsive-menu">
			<div class="top-bar-right">
				<ul class="menu">
					<li>{{> atNavButton}}</li>
				</ul>
			</div>
		</div>
	</div>
</div>

</template>

<!-- route: all -->

<template name="navbar">
<span class="debug">template: {{currentTemplateName}}</span>

<span class="debug">TODO: should be only visible on mobile.</span>
	
	<div class="title-bar" data-responsive-toggle="main-menu" data-hide-for="medium">
		<button class="menu-icon" type="button" data-toggle></button>
		<div class="title-bar-title">Menu</div>
	</div>
	
<span class="debug">TODO: home link not align properly. Burger menu useless.</span>

	<div class="top-bar" id="main-menu">
		<div class="top-bar-title">
			<span data-responsive-toggle="responsive-menu" data-hide-for="medium">
				<span class="menu-icon dark" data-toggle></span>
			</span>
			<strong>
				<a href="{{pathFor 'home'}}">
					<span aria-hidden="true"><i class="fi-home"></i></span>
					{{projectName}}
				</a>
			</strong>
		</div>
		<div id="responsive-menu">
			<div class="top-bar-left">
				<ul class="dropdown menu" data-dropdown-menu>
					<li class="{{isActiveRoute regex='time'}}"><a href="{{pathFor 'time'}}">
						<span aria-hidden="true"><i class="fi-refresh"></i></span>
						Track Times
					</a></li>
					<li class="{{isActiveRoute regex='item'}}"><a href="{{pathFor 'item.list'}}">
						<span aria-hidden="true"><i class="fi-list-thumbnails"></i></span>
						List Items
					</a></li>
					<li class="{{isActiveRoute regex='reports'}}"><a href="{{pathFor 'reports'}}">
						<span aria-hidden="true"><i class="fi-graph-trend"></i></span>
						Reports
					</a></li>
					<li class="{{isActiveRoute regex='settings'}}"><a href="{{pathFor 'settings'}}">
						<span aria-hidden="true"><i class="fi-wrench"></i></span>
						Settings
					</a></li>
					<!--
					<li class="{{isActiveRoute regex='logout'}}"><a href="{{pathFor 'logout'}}">
						<span aria-hidden="true"><i class="fi-power"></i></span>
						Logout
					</a></li>
					-->
				</ul>
			</div>
			<div class="top-bar-right">
				<ul class="menu">
					<li><input type="search" placeholder="Search"></li>
					<li>
						<button class="button" type="button">
							<!-- Screen readers will see "close" -->
							<span class="show-for-sr">Search</span>
							<!-- Visual users will see the X, but not the "Close" text -->
							<span aria-hidden="true"><i class="fi-magnifying-glass"></i></span>
						</button>
					</li>
					<li>{{> atNavButton}}</li>
				</ul>
			</div>
		</div>
	</div>

</template>


<!-- templates for main -->

<!-- route: / -->
<template name="login">
<span class="debug">template: {{currentTemplateName}}</span>
  
   {{> atForm state='signIn'}}
   
</template>

<template name="register">
<span class="debug">template: {{currentTemplateName}}</span>
  
   {{> atForm state='signUp'}}
   
</template>

<!-- route: iamin -->
<template name="iamincontainer">
<span class="debug">template: {{currentTemplateName}}</span>
	{{> itemcomment}}
	{{> itemrecentlist}}
	{{> createbuttons}}
</template>

<template name="itemrecentlist">
<span class="debug">template: {{currentTemplateName}}</span>

<div class="panel panel-default">

	<div class="panel-heading">Your recent items:</div>
	<table class="table table-striped table-hover">
		<thead class="thead-default">
			<tr>
				<th>Path</th>
				<th>Item</th>
				<th>Time</th>
				<th>start/stop</th>
			</tr>
		</thead>
		<tbody>
		{{#each item in recentitems}}
			<tr>
				<th scope="row">{{item.path}}</th>
				<td><a href="{{pathFor 'item.detail' _id=item._id}}">{{item.title}}</a></td>
				<td>{{item.timeelapsed}}</td>
				<td><button class="button">start</button></td>
			</tr>
		{{/each}}
		</tbody>
	</table>
</div>

</template>

<template name="itemcomment">
<span class="debug">template: {{currentTemplateName}}</span>
</template>

<template name="createbuttons">
<span class="debug">template: {{currentTemplateName}}</span>

<div class="callout clearfix">
	<ul class="float-right">
		<li><a href="{{pathFor 'item.create' _id='0'}}">
			<span aria-hidden="true"><i class="fi-plus"></i></span>
			New Item
		</a></li>
		<li><a href="{{pathFor 'time.create' _id='0'}}">
			<span aria-hidden="true"><i class="fi-plus"></i></span>
			add Time
		</a></li>
	</ul>
</div>

</template>


<!-- route: item -->

<template name="itemcontainer">
<span class="debug">template: {{currentTemplateName}}</span>
	{{> itemtree}}
	
	{{#if equals currentRoute "item.create"}}
		{{> leafform parentitem=_id}}
	{{else}}
		{{#if _id}}
			{{> leafform _id=_id}}
		{{/if}}
	{{/if}}
	
</template>

<template name="itemtree">
<span class="debug">template: {{currentTemplateName}}</span>

<ul>
{{#each item in items}}
	<li><a href="{{pathFor 'item.detail' _id=item._id}}">{{item.title}}</a></li>
{{/each}}
</ul>

</template>

<template name="leafform">
<span class="debug">template: {{currentTemplateName}}</span>

	{{#if _id}}
		
		<h3>Edit Item [ {{item._id}} ]</h3> 
				
		{{> quickForm collection="Items" id="editItemForm" doc=item type="method-update" meteormethod="itemUpdate" singleMethodArgument=true}}
		
		<a class="btn" href="{{pathFor 'item.list'}}">Back</a>
		
	{{else}}
		<h3>New Item</h3> 
		
		{{> quickForm collection="Items" id="insertItemForm" type="method" meteormethod="itemInsert"}}
	{{/if}}
	
</template>

<template name="branchform">
<span class="debug">template: {{currentTemplateName}}</span>
</template>

<!-- route: attrib -->

<template name="attributecontainer">
<span class="debug">template: {{currentTemplateName}}</span>
	{{> attributeform}}
</template>

<template name="attributeform">
<span class="debug">template: {{currentTemplateName}}</span> 

</template>

<!-- route: time -->

<template name="timecontainer">
<span class="debug">template: {{currentTemplateName}}</span>
	{{> timelist}}
	
	{{#if equals currentRoute "time.create"}}
		{{> timeform parentitem=_id}}
	{{else}}
		{{#if _id}}
			{{> timeform _id=_id}}
		{{/if}}
	{{/if}}
</template>


<template name="timelist">
<span class="debug">template: {{currentTemplateName}}</span>


	<div class="panel-heading">Times:</div>
	<table class="table table-striped table-hover">
		<thead class="thead-default">
			<tr>
				<th>Path</th>
				<th>Item</th>
				<th>start</th>
				<th>end</th>
			</tr>
		</thead>
		<tbody>
		{{#each time in times}}
			<tr>
				<th scope="row">{ {time.item.path} }</th>
				<td><a href="{ {pathFor 'item.detail' _id=time.item._id} }">{ {time.item.title} }</a></td>
				<td>{{time.start}}</td>
				<td>{{time.end}}</td>
			</tr>
		{{/each}}
		</tbody>
	</table>

</template>

<template name="timeform">
<span class="debug">template: {{currentTemplateName}}</span>

	{{#if _id}}
		
		<h3>Edit Time Entry [ {{time._id}} ]</h3> 
				
		{{> quickForm collection="Times" id="editTimeForm" doc=time type="method-update" meteormethod="timeUpdate" singleMethodArgument=true}}
		
		<a class="btn" href="{{pathFor 'time.list'}}">Back</a>
		
	{{else}}
		<h3>New Time Entry</h3> 
		
		{{> quickForm collection="Times" id="insertTimeForm" type="method" meteormethod="timeInsert"}}
	{{/if}}
	
</template>

<!-- route: report -->

<template name="reportlist">
<span class="debug">template: {{currentTemplateName}}</span>
</template>

<!-- route: settings -->

<template name="settings">
<span class="debug">template: {{currentTemplateName}}</span>
</template>


<!-- templates for rest -->
<template name="pageNotFound">
  <div>
    <h3>404 - Houston, we have a problem!!!</h3>
    <h5>The page you're looking for was not found.</h5>
  </div>
</template>

<template name="atNavButton-test-bootstrap">
  <button type="button" id="at-nav-button" class="btn btn-default navbar-btn">{{text}}</button>
</template>

<template name="autocompleteItem">
<span class="debug">template: {{currentTemplateName}}</span>
Did you mean: {{title}} or {{item.title}}
</template>
